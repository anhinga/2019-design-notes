# Architecture notes (in progress)

I don't have a ready final architecture in my mind, which just needs to be written. The [History.md](History.md) gives me some ideas and some warnings about potential problems.

So I'll start just with putting notes about those ideas and those problems here.

## Preliminary snippets

### Graph editor controller for a changing graph

This is an interesting problem. If one edits on the level of network matrix, one can trigger a change without knowing the exact state of the matrix. Even if the change algebraically depends on the moving target, still one can use the current snapshot of that target to get the needed values.

But with explicit graph editing one cannot play it this way: if a graph is changing in front of you, it would not be possible to reasonably manipulate it with a mouse.

So a tentative solution is as follows: if one is dealing with a morphing graph, one makes a copy (which is a frozen in time snapshot of the graph in question), edits it, and sends forward a delta generated by this edit. We expect that any given delta can always be applied to any graph whatsoever (this is certainly true, if one does it on the level of weight-connectivity matrices corresponding to the graphs, one can always add two matrices, and any matrix over reasonable signature of indices has an interpretation as a network graph).

It's all good for small graphs. Navigating and editing large graphs is a separate non-trivial problem (but it should at least be considered for Stage 1).

The exact interplay of graph and matrix representations also requires further thoughts. Do we store both and make sure that they are always in sync? So we have further topic for meditation on graph controllers.

### Various kinds of streamed objects

We were always able to stick to one kind of streamed objects in our experiments. First, these were images (in the pre-DMM experiments), then numbers (in early DMMs), then network-sized matrices (in Lightweight pure DMMs), then finally V-values (and V-values are universal enough to allow to embed any reasonable streams of objects into streams of appropriately crafted V-values (Section 5.3 of https://arxiv.org/abs/1712.07447 ).

However, in principle, nothing precludes having different kinds of streams in a DMM (Section 3 of https://arxiv.org/abs/1605.05296 ). And I really want to avoid making a decision to stick to a particular kind of streams at this point, even if that kind is sufficiently universal.
